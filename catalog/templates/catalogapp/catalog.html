{% extends 'base.html' %}
{% load static %}
{%block name%}
catalogg
{%endblock%}
{%block content%}
<div class="catalog-blok">
  <div class="category-blok2">
    <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasTop" aria-controls="offcanvasTop" style="background-color: white;color: black;">Filter</button>
    <div class="sales-hits-line" style="background-color: D2F018;height: 40px;display: flex;justify-content: center;">
      <h2 style="position: relative;background-color: #D2F018;">Sales Hits</h2>
    </div>
    <div id="carouselExampleIndicators" class="carousel slide">
      <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
      </div>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img src="http://localhost:8000/media/media/MSI_PCI-Ex_GeForce_RTX_3050_Ventus_2X_8G_OC_8GB_GDDR6_n2wtbov.jpg" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item">
          <img src="http://localhost:8000/media/media/image_3.png" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item">
          <img src="http://localhost:8000/media/media/s-l1600.jpg" class="d-block w-100" alt="...">
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
      <a class="carousel-control-prev" href="#hitsCarousel" role="button" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </a>
      <a class="carousel-control-next" href="#hitsCarousel" role="button" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </a>
    </div>
    <div class="cataloggg text-center" style="gap: 20px;">
      {% for product in list_products %}
      <div class="product product-category-{{ product.category }}" data-name="{{ product.name }}" style="width: 18rem;border-radius: 20px;">
        <div class="catalogg">
          <img src="{{ product.image.url }}" class="card-img-top" alt=".s..">
          <div class="card-body">
            <h2>{{ product.name }}</h2>
            <span>{{ product.price }}$</span>
            <a href="{{ product.get_absolute_url }}" class="btn btn-primary">Detailed description</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
    
    <!-- <div class="cataloggg" style="gap: 10px; padding-top: 10px; ">
      {% for product in list_products %}
      <div class="catalogg ">
        <img src="{{product.image.url}}" class="card-img-top" alt=".s..">
        <div class="card-body">
          <h2>{{product.name}}</h2>
          <span>{{product.price}}$</span>
          <a href="{{ product.get_absolute_url }}" class="btn btn-primary">Detailed description</a>
        </div>
      </div> -->
      <!-- <div class="product product.category" style="width: 18rem;">
        <div class="catalogg ">
          <img src="{{product.image.url}}" class="card-img-top" alt=".s..">
          <div class="card-body">
            <h2>{{product.name}}</h2>
            <span>{{product.price}}$</span>
            <a href="{{ product.get_absolute_url }}" class="btn btn-primary">Detailed description</a>
          </div>
        </div>
      </div> -->
      <!-- {%endfor%} -->
    </div>
    </div>
  </div>
  </div>
  <div class="offcanvas offcanvas-top canvas" tabindex="-1" id="offcanvasTop" aria-labelledby="offcanvasTopLabel" style="background-color: white;">
    <div class="offcanvas-header" style="background-color: white;">
      <h5 class="offcanvas-title" id="offcanvasTopLabel">Filters</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body filters">
      {% for category in additional_category %}
        <div class="manufacturers">
          <input type="checkbox" class="check" value="{{ category.name }}" checked>
          <p>{{category.name}}</p>
        </div>
      {% endfor %}
    </div>
  </div>
</div>
  
<script>

  const list = document.querySelector('.offcanvas-body.filters');
  const productItems = document.querySelectorAll('.product');
  const checkboxes = document.querySelectorAll('.manufacturers input[type="checkbox"]');
  const hitsProducts = document.querySelectorAll('.sales-hits-product-body-card');

  function filter() {
    checkboxes.forEach(checkbox => {
      checkbox.addEventListener('change', () => {
        const selectedManufacturers = Array.from(checkboxes)
          .filter(checkbox => checkbox.checked)
          .map(checkbox => checkbox.value);

        filterItems(selectedManufacturers);
      });
    });
  }

  function filterItems(selectedManufacturers) {
    productItems.forEach(item => {
      const manufacturer = item.classList[1];

      if (selectedManufacturers.includes(manufacturer)) {
        item.style.display = 'flex';
      } else {
        item.style.display = 'none';
      }
    });
  }

  filter();
</script>
{%endblock%}
