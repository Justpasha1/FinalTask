{% extends 'base.html' %}
{%block name%}
catalogg
{%endblock%}
{%block content%}
<div class="catalog-blok">
  <div class="category-blok">
    <button class="btn btn-primary" style="background-color: #ffffff; border: #ffffff solid; color: black;" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasTop" aria-controls="offcanvasTop">Filter</button>

    <div class="offcanvas offcanvas-top category" tabindex="-1" id="offcanvasTop" aria-labelledby="offcanvasTopLabel">
      <div class="category-blok">
          <div class="offcanvas-header" >
              <h5 class="offcanvas-title" id="offcanvasTopLabel">Filter</h5>
              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body checkbox">
              {% for category in additional_category %}
              <div class="manufacturers">
                <h2>Manufacturers:</h2>
                <input type="checkbox" class = "check" value="{{ option.price }}" checked>

                <p>{{category.name}}</p>
              </div>
              {% endfor %}
          </div>
      </div>
    </div>
    {% for product in list_products %}
    <div class="product" style="width: 18rem;">
      <div class="catalogg">
        <img src="{{product.image.url}}" class="card-img-top" alt=".s..">
        <div class="card-body">
          <h2>{{product.name}}</h2>
          <span>{{product.price}}$</span>
          <a href="{{ product.get_absolute_url }}" class="btn btn-primary">Detailed description</a>
        </div>
      </div>
    </div>
    {%endfor%}

</div>
<script>
  // Get all the checkboxes
  const checkboxes = document.querySelectorAll('.check');

  // Add event listener for checkbox change
  checkboxes.forEach(checkbox => {
    checkbox.addEventListener('change', function() {
      const category = this.dataset.category;

      // Show/hide products based on checkbox state and category
      const products = document.querySelectorAll('.catalogg');
      products.forEach(product => {
        if (category === '{{category.name}}') {
          product.style.display = this.checked ? 'block' : 'none';
        } else {
          product.style.display = 'block';
        }
      });
    });
  });
</script>
{%endblock%}
